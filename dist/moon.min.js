/**
 * Moon v0.8.0
 * Copyright 2016-2017 Kabir Shah
 * Released under the MIT License
 * http://moonjs.ga
 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.Moon=t()}(this,function(){"use strict";function e(e){this.instance=e,this.cache={},this.signals={},this.dep={target:null,map:{}}}function t(t){this.$opts=t||{},this.$id=s++,this.$name=this.$opts.name||"root",this.$data=this.$opts.data||{},this.$render=this.$opts.render||y,this.$hooks=this.$opts.hooks||{},h(this.$data,this.$opts.methods||{}),this.$events={},this.$dom={},this.$observer=new e(this),this.$destroyed=!0,this.$queued=!1,this.$opts.computed&&a(this,this.$opts.computed),this.init()}var r={},n={},i={},o={stop:"event.stopPropagation();",prevent:"event.preventDefault();",ctrl:"if(!event.ctrlKey) {return;};",shift:"if(!event.shiftKey) {return;};",alt:"if(!event.altKey) {return;};",enter:"if(event.keyCode !== 13) {return;};"},s=0,a=function(e,t){for(var r in t)!function(r){e.$observer.observe(r);var n={get:function(){var n=null;return e.$observer.cache[r]?n=e.$observer.cache[r]:(e.$observer.dep.target=r,n=t[r].get.call(e),e.$observer.dep.target=null,e.$observer.cache[r]=n),n}};t[r].set&&(n.set=function(n){return t[r].set.call(e,n)}),Object.defineProperty(e.$data,r,n)}(r)};e.prototype.observe=function(e){var t=this;this.signals[e]=function(){t.cache[e]=null}},e.prototype.notify=function(e){if(this.dep.map[e])for(var t=0;t<this.dep.map[e].length;t++)this.notify(this.dep.map[e][t]);this.signals[e]&&this.signals[e]()};var u=function(e){t.config.silent||console.log(e)},l=function(e){t.config.silent||console.error("[Moon] ERR: "+e)},c=function(e){!1===e.$queued&&!1===e.$destroyed&&(e.$queued=!0,setTimeout(function(){e.build(),g(e,"updated"),e.$queued=!1},0))},p=function(){return{shouldRender:!1,eventListeners:{}}},f=function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")},v=function(e,t,r,n){var i=null;r.replace(/\[(\w+)\]/g,function(e,t){r=r.replace(e,"."+t)});var o=r.split(".");for(i=0;i<o.length-1;i++){t=t[o[i]]}return t[o[i]]=n,o[0]},d=function(e){var t={};if(t.default=[],0===e.length)return t;for(var r=0;r<e.length;r++){var n=e[r],i=n.props.attrs,o="";void 0!==(o=i.slot)?(void 0===t[o]?t[o]=[n]:t[o].push(n),delete i.slot):t.default.push(n)}return t},h=function(e,t){for(var r in t)e[r]=t[r];return e},m=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},g=function(e,t){var r=e.$hooks[t];void 0!==r&&r.call(e)},$=function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},y=function(){},b=function(e){for(var t={},r=e.attributes,n=r.length;n--;)t[r[n].name]=r[n].value;return t},x=function(e,t,r){var n=t.meta.eventListeners;for(var i in n)for(var o=0;o<n[i].length;o++){var s=n[i][o];e.addEventListener(i,s)}},k=function(e,t){var r=null;if("#text"===e.type)r=document.createTextNode(e.val);else{if(r=e.meta.isSVG?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),1===e.children.length&&"#text"===e.children[0].type)r.textContent=e.children[0].val,e.children[0].meta.el=r.firstChild;else for(var n=0;n<e.children.length;n++){var i=e.children[n],o=k(e.children[n],t);r.appendChild(o),i.meta.component&&P(o,i,i.meta.component)}x(r,e)}return G(r,{},e,e.props.attrs),e.meta.el=r,r},E=function(e,t,r){r.appendChild(e),t.meta.component&&P(e,t,t.meta.component)},_=function(e,t){e.__moon__&&e.__moon__.destroy(),t.removeChild(e)},R=function(e,t,r,n){e.__moon__&&e.__moon__.destroy(),n.replaceChild(t,e),r.meta.component&&P(t,r,r.meta.component)},w={SKIP:0,APPEND:1,REMOVE:2,REPLACE:3,TEXT:4,CHILDREN:5},A=function(e,t,r,n,i){return{type:e,val:t,props:r,children:i,meta:n||p()}},C=function(e,t,r){var n=r.opts.data||{};if(void 0!==r.opts.props)for(var i=r.opts.props,o=0;o<i.length;o++){var s=i[o];n[s]=e.attrs[s]}return r.opts.render(L,{data:n,slots:d(t)})},L=function(e,t,r,n){var o=null;if("#text"===e)return A("#text",r,{attrs:{}},t,[]);if(void 0!==(o=i[e])){if(!0===o.opts.functional)return C(t,n,i[e]);r.component=o}return A(e,"",t,r,n)},P=function(e,t,r){for(var n=new r.CTor,i=0;i<n.$props.length;i++){var o=n.$props[i];n.$data[o]=t.props.attrs[o]}return n.$slots=d(t.children),n.$el=e,n.build(),g(n,"mounted"),t.meta.el=n.$el,n.$el},G=function(e,t,n){var i=n.props.attrs;for(var o in i){var s=i[o],a=t[o];void 0===s&&!1===s&&null===s||void 0!==a&&!1!==a&&null!==a&&s===a||(10===o.length&&"xlink:href"===o?e.setAttributeNS("http://www.w3.org/1999/xlink","href",s):e.setAttribute(o,!0===s?"":s))}for(var u in t){var l=i[u];void 0!==l&&!1!==l&&null!==l||e.removeAttribute(u)}if(void 0!==n.props.directives)for(var c in n.props.directives)r[c](e,n.props.directives[c],n);if(void 0!==n.props.dom)for(var p in n.props.dom){var f=n.props.dom[p];e[p]!==f&&(e[p]=f)}},O=function(e,t){if(void 0===e.__moon__)P(e,t,t.meta.component);else{for(var r=e.__moon__,n=!1,i=0;i<r.$props.length;i++){var o=r.$props[i];r.$data[o]!==t.props.attrs[o]&&(r.$data[o]=t.props.attrs[o],n=!0)}0!==t.children.length&&(r.$slots=d(t.children),n=!0),!0===n&&r.build()}},S=function(e,t,r,n){var i=e?e.nodeName.toLowerCase():null;if(null===e){var o=k(t,n);return E(o,t,r),o}if(void 0===t)return _(e,r),null;if(i!==t.type){var o=k(t,n);return R(e,o,t,r),o}if("#text"===t.type)return"#text"===i?(e.textContent!==t.val&&(e.textContent=t.val),t.meta.el=e):R(e,k(t,n),t,r),e;if(t.meta.el=e,void 0!==t.meta.component)return O(e,t),e;if(G(e,b(e),t),x(e,t),void 0!==t.props.dom&&void 0!==t.props.dom.innerHTML)return e;for(var s=0,a=e.firstChild,u=t.children[s];void 0!==u||null!==a;){var l=a?a.nextSibling:null;S(a,u,e,n),u=t.children[++s],a=l}return e},T=function(e,t,r,n){if(null===e)return E(k(t,n),t,r),w.APPEND;if(null===t)return _(e.meta.el,r),w.REMOVE;if(e===t)return w.SKIP;if(e.type!==t.type)return R(e.meta.el,k(t,n),t,r),w.REPLACE;if(!0===t.meta.shouldRender&&"#text"===t.type){var i=e.meta.el;return"#text"===e.type?(t.val!==e.val&&(i.textContent=t.val),w.TEXT):(R(i,k(t,n),t,r),w.REPLACE)}if(!0===t.meta.shouldRender){var o=e.meta.el;if(void 0!==t.meta.component)return O(o,t),w.SKIP;if(G(o,e.props.attrs,t),e.props.attrs=t.props.attrs,void 0!==t.props.dom&&void 0!==t.props.dom.innerHTML)return w.SKIP;var s=t.children.length,a=e.children.length;if(0===s){if(0!==a){for(var u=null;null!==(u=o.firstChild);)_(u,o);e.children=[]}}else for(var l=s>a?s:a,c=0;c<l;c++){var p=c<a?e.children[c]:null,f=c<s?t.children[c]:null,v=T(p,f,o,n);switch(v){case w.APPEND:e.children[a++]=f;break;case w.REMOVE:e.children.splice(c,1),a--;break;case w.REPLACE:e.children[c]=t.children[c];break;case w.TEXT:p.val=f.val}}return w.CHILDREN}return t.meta.el=e.meta.el,w.SKIP},D=/\s/,N=function(e,t,r,n){var i={current:0,template:e,output:"",openDelimiterLen:t[0].length,closeDelimiterLen:t[1].length,openRE:new RegExp(r[0]),closeRE:new RegExp("\\s*"+r[1])};return M(i,n),i.output},M=function(e,t){for(var r=e.template,n=r.length;e.current<n;){var i=j(e,e.openRE);if(i&&(e.output+=i),e.current===n)break;e.current+=e.openDelimiterLen,K(e);var o=j(e,e.closeRE);if(e.current===n)break;if(o){var s="",a=null;-1!==(a=o.search(/\[|\.|\(/))&&(s=o.substring(a),o=o.substring(0,a)),e.output+=t?'" + instance.get("'+o+'")'+s+' + "':'instance.get("'+o+'")'+s}K(e),e.current+=e.closeDelimiterLen}},j=function(e,t){var r=e.template,n=r.substring(e.current),i=(n.length,n.search(t)),o="";switch(i){case-1:o=n;break;case 0:o="";break;default:o=n.substring(0,i)}return e.current+=o.length,o},K=function(e){for(var t=e.template,r=t[e.current];D.test(r);)r=t[++e.current]},I=function(e){var t={input:e,current:0,tokens:[]};return V(t),t.tokens},V=function(e){for(var t=e.input,r=t.length;e.current<r;)"<"===t.charAt(e.current)?"\x3c!--"!==t.substr(e.current,4)?X(e):q(e):H(e)},H=function(e){var t=e.input,r=t.length,n=t.substring(e.current).search(/<[\w\/]\s*/)+e.current;if(-1===n)return e.tokens.push({type:"text",value:t.slice(e.current)}),void(e.current=r);n!==e.current&&(e.tokens.push({type:"text",value:t.slice(e.current,n)}),e.current=n)},q=function(e){var t=e.input,r=t.length;e.current+=4;var n=t.indexOf("--\x3e",e.current);if(-1===n)return e.tokens.push({type:"comment",value:t.slice(e.current)}),void(e.current=r);e.tokens.push({type:"comment",value:t.slice(e.current,n)}),e.current=n+3},X=function(e){var t=e.input,r=(t.length,"/"===t.charAt(e.current+1));e.current+=r?2:1;var n=J(e);F(n,e);var i="/"===t.charAt(e.current);e.current+=i?2:1,r&&(n.closeStart=!0),i&&(n.closeEnd=!0)},J=function(e){for(var t=e.input,r=t.length,n=e.current,i="";n<r;){var o=t.charAt(n);if("/"===o||">"===o||" "===o)break;i+=o,n++}var s={type:"tag",value:i};return e.tokens.push(s),e.current=n,s},F=function(e,t){for(var r=t.input,n=r.length,i=t.current,o=r.charAt(i),s=r.charAt(i+1),a=function(){i++,o=r.charAt(i),s=r.charAt(i+1)},u={};i<n&&">"!==o&&("/"!==o||">"!==s);)if(" "!==o){for(var l="",c=!1;i<n&&"="!==o;){if(" "===o||">"===o||"/"===o||">"===s){c=!0;break}l+=o,a()}var p={name:l,value:"",meta:{}};if(c)u[l]=p;else{a();var f=" ";for("'"!==o&&'"'!==o||(f=o,a());i<n&&o!==f;)p.value+=o,a();a();var v=l.indexOf(":");if(-1!==v){var d=l.split(":");p.name=d[0],p.meta.arg=d[1]}u[l]=p}}else a();t.current=i,e.attributes=u},z=function(e){for(var t={type:"ROOT",children:[]},r={current:0,tokens:e};r.current<e.length;){var n=W(r);n&&t.children.push(n)}return t},B=["area","base","br","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Q=["svg","animate","circle","clippath","cursor","defs","desc","ellipse","filter","font-face","foreignObject","g","glyph","image","line","marker","mask","missing-glyph","path","pattern","polygon","polyline","rect","switch","symbol","text","textpath","tspan","use","view"],U=function(e,t,r){return{type:e,props:t,children:r}},W=function(e){var t=e.tokens[e.current],r=e.tokens[e.current-1],n=e.tokens[e.current+1],i=function(i){e.current+=void 0===i?1:i,t=e.tokens[e.current],r=e.tokens[e.current-1],n=e.tokens[e.current+1]};if("text"===t.type)return i(),r.value;if("comment"===t.type)return i(),null;if("tag"===t.type){var o=t.value,s=t.closeStart,a=(t.closeEnd,-1!==Q.indexOf(o)),u=-1!==B.indexOf(o),l=U(o,t.attributes,[]);if(i(),a&&(l.isSVG=!0),u)return l;if(!0===s)return null;if(void 0!==t){for(e.current;"tag"!==t.type||"tag"===t.type&&(void 0===t.closeStart&&void 0===t.closeEnd||t.value!==o);){var c=W(e);if(null!==c&&l.children.push(c),i(0),void 0===t)break}i()}return l}i()},Y=null,Z=null,ee=function(e,t){var i=e.props.attrs,o="{attrs: {";if(e.props.directives=[],i){for(var s in i){var a=i[s],u=a.name,l=null;void 0!==(l=n[u])&&l.beforeGenerate&&l.beforeGenerate(a.value,a.meta,e,t)}for(var c in i){var p=i[c],f=p.name,v=null;if(void 0!==(v=n[f]))void 0!==v.afterGenerate&&(void 0===e.specialDirectivesAfter&&(e.specialDirectivesAfter={}),e.specialDirectivesAfter[c]=p),void 0!==v.duringPropGenerate&&(o+=v.duringPropGenerate(p.value,p.meta,e)),e.meta.shouldRender=!0,delete i[c];else if(void 0!==r[f])e.props.directives.push(p),e.meta.shouldRender=!0;else{var d=JSON.stringify(p.value),h=N(d,Y,Z,!0);d!==h&&(e.meta.shouldRender=!0),o+='"'+c+'": '+h+", "}}0!==Object.keys(i).length?o=o.slice(0,-2)+"}":o+="}"}var m=e.props.dom;if(void 0!==m){e.meta.shouldRender=!0,o+=", dom: {";for(var g in m)o+='"'+g+'": '+m[g]+", ";o=o.slice(0,-2)+"}"}var $=e.props.directives;if(0!==$.length){o+=", directives: {";for(var y=0;y<$.length;y++){var b=$[y],x=b.literal?b.value:JSON.stringify(b.value);o+='"'+b.name+'": '+x+", "}o=o.slice(0,-2)+"}"}return o+="}"},te=function(e){if(0===Object.keys(e).length)return"{}";var t="{";for(var r in e)t+='"'+r+'": ['+ne(e[r])+"], ";return t=t.slice(0,-2)+"}"},re=function(e){var t="{";for(var r in e)t+="eventListeners"===r?'"'+r+'": '+te(e[r])+", ":'"'+r+'": '+e[r]+", ";return t=t.slice(0,-2)+"}"},ne=function(e){for(var t="",r=0;r<e.length;r++)t+=e[r]+", ";return t=t.slice(0,-2)},ie=function(e,t){var r='h("'+e.type+'", ';r+=ee(e,t)+", ";var n=e.children.map(function(t){return oe(t,e)});return!0===e.meta.shouldRender&&void 0!==t&&(t.meta.shouldRender=!0),r+=re(e.meta),0!==n.length?!0===e.deep?r+=", [].concat.apply([], ["+ne(n)+"])":r+=", ["+ne(n)+"]":r+=", []",r+=")"},oe=function(e,t){var r="";if("string"==typeof e){var i=f(e),o=N(i,Y,Z,!0),s=p();i!==o&&(t.meta.shouldRender=!0,s.shouldRender=!0),r+='h("#text", '+re(s)+', "'+o+'")'}else{e.meta||(e.meta=p()),e.isSVG&&(e.meta.isSVG=!0),e.props={attrs:e.props};var a="";if("slot"===e.type){t.meta.shouldRender=!0,t.deep=!0;var u=e.props.attrs.name;a="instance.$slots['"+(u&&u.value||"default")+"']"}else a=ie(e,t);if(void 0!==e.specialDirectivesAfter)for(var l in e.specialDirectivesAfter){var c=e.specialDirectivesAfter[l];a=n[c.name].afterGenerate(c.value,c.meta,a,e)}r+=a}return r},se=function(e){var r=e.children[0],n=null;(n=t.config.delimiters)!==Y&&(Y=n,Z=new Array(2),Z[0]=$(Y[0]),Z[1]=$(Y[1]));var i="var instance = this; return "+oe(r);try{return new Function("h",i)}catch(e){return l("Could not create render function"),y}},ae=function(e){var t=I(e),r=z(t);return se(r)};return t.prototype.get=function(e){if(this.$observer.dep.target){var t=this.$observer.dep.target;this.$observer.dep.map[e]?-1===this.$observer.dep.map[e].indexOf(t)&&this.$observer.dep.map[e].push(t):this.$observer.dep.map[e]=[t]}return this.$data[e]},t.prototype.set=function(e,t){var r=v(0,this.$data,e,t);this.$observer.notify(r),c(this)},t.prototype.destroy=function(){this.off(),this.$el=null,this.$destroyed=!0,g(this,"destroyed")},t.prototype.callMethod=function(e,t){t=t||[],this.$data[e].apply(this,t)},t.prototype.on=function(e,t){var r=this.$events[e];void 0===r?this.$events[e]=[t]:r.push(t)},t.prototype.off=function(e,t){if(void 0===e)this.$events={};else if(void 0===t)this.$events[e]=[];else{var r=this.$events[e],n=r.indexOf(t);r.splice(n,1)}},t.prototype.emit=function(e,t){var r=t||{};r.type=e;for(var n=this.$events[e],i=this.$events["*"],o=0;o<n.length;o++)n[o](r);if(void 0!==i)for(var o=0;o<i.length;o++)i[o](r)},t.prototype.renderLoop=function(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=t(e[n],n);return r},t.prototype.renderClass=function(e){if("string"==typeof e)return e;var t="";if(Array.isArray(e))for(var r=0;r<e.length;r++)t+=this.renderClass(e[r])+" ";else if("object"==typeof e)for(var n in e)e[n]&&(t+=n+" ");return t=t.slice(0,-1)},t.prototype.mount=function(e){this.$el=document.querySelector(e),this.$destroyed=!1,this.$el.__moon__=this,this.$template=this.$opts.template||this.$el.outerHTML,this.$render===y&&(this.$render=t.compile(this.$template)),this.build(),g(this,"mounted")},t.prototype.render=function(){return this.$render(L)},t.prototype.patch=function(e,t,r){if(void 0!==e.meta&&void 0!==e.meta.el)t.type!==e.type?(R(e.meta.el,k(t,this),r),this.$el=t.meta.el,this.$el.__moon__=this):T(e,t,r,this);else if(e instanceof Node){var n=S(e,t,r,this);n!==e&&(this.$el=t.meta.el,this.$el.__moon__=this)}},t.prototype.build=function(){var e=this.render(),t=null;void 0!==this.$dom.meta?t=this.$dom:(t=this.$el,this.$dom=e),this.patch(t,e,this.$el.parentNode)},t.prototype.init=function(){u("======= Moon ======="),g(this,"init"),void 0!==this.$opts.el&&this.mount(this.$opts.el)},t.config={silent:!0,prefix:"m-",delimiters:["{{","}}"],keyCodes:function(e){for(var t in e)o[t]="if(event.keyCode !== "+e[t]+") {return;};"}},t.version="0.8.0",t.util={noop:y,error:l,log:u,merge:m,extend:h,h:L},t.use=function(e){e.init(t)},t.compile=function(e){return ae(e)},t.nextTick=function(e){setTimeout(e,0)},t.directive=function(e,n){r[t.config.prefix+e]=n},t.component=function(e,r){function n(){t.call(this,r)}var o=this;return r.name?e=r.name:r.name=e,n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.init=function(){g(this,"init"),this.$destroyed=!1,this.$props=this.$opts.props||[],this.$template=this.$opts.template,this.$render===y&&(this.$render=t.compile(this.$template))},i[e]={CTor:n,opts:r},n},n[t.config.prefix+"if"]={afterGenerate:function(e,t,r,n){return"("+N(e,Y,Z,!1)+") ? "+r+" : null"}},n[t.config.prefix+"show"]={beforeGenerate:function(e,r,n,i){var o={name:t.config.prefix+"show",value:N(e,Y,Z,!1),literal:!0};n.props.directives.push(o)}},n[t.config.prefix+"for"]={beforeGenerate:function(e,t,r,n){n.deep=!0},afterGenerate:function(e,t,r,n){var i=e.split(" in "),o=i[0].split(","),s=N(i[1],Y,Z,!1),a=o.join(",");return r.replace(new RegExp('instance\\.get\\("('+o.join("|")+')"\\)',"g"),function(e,t){r=r.replace(new RegExp('instance.get\\("'+t+'"\\)',"g"),t)}),"instance.renderLoop("+s+", function("+a+") { return "+r+"; })"}},n[t.config.prefix+"on"]={beforeGenerate:function(e,t,r){var n=t.arg.split("."),i=n[0],s="event",a=N(e,Y,Z,!1),u=a.split("(");u.length>1&&(a=u.shift(),s=u.join("(").slice(0,-1));var l="";n.shift();for(var c=0;c<n.length;c++)l+=o[n[c]];var p="function(event) {"+l+'instance.callMethod("'+a+'", ['+s+"])}";void 0===r.meta.eventListeners[i]?r.meta.eventListeners[i]=[p]:r.meta.eventListeners[i].push(p)}},n[t.config.prefix+"model"]={beforeGenerate:function(e,t,r){var n=N(e,Y,Z,!0),i="input",o="value";void 0!==r.props.attrs.type&&"checkbox"===r.props.attrs.type.value&&(i="change",o="checked");var s='function(event) {instance.set("'+n+'", event.target.'+o+")}";void 0===r.meta.eventListeners[i]?r.meta.eventListeners[i]=[s]:r.meta.eventListeners[i].push(s);var a=N(""+Y[0]+N(e,Y,Z,!1)+Y[1],Y,Z,!1);void 0===r.props.dom&&(r.props.dom={}),r.props.dom[o]=a}},n[t.config.prefix+"literal"]={duringPropGenerate:function(e,t,r){var n=t.arg;return"class"===n?'"class": instance.renderClass('+N(e,Y,Z,!1)+"), ":'"'+n+'": '+N(e,Y,Z,!1)+", "}},n[t.config.prefix+"html"]={beforeGenerate:function(e,t,r){void 0===r.props.dom&&(r.props.dom={}),r.props.dom.innerHTML='"'+N(e,Y,Z,!0)+'"'}},r[t.config.prefix+"show"]=function(e,t,r){e.style.display=t?"":"none"},r[t.config.prefix+"mask"]=function(e,t,r){},t});