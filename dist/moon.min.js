/*
* Moon 0.1.3
* Copyright 2016-2017, Kabir Shah
* https://github.com/KingPixil/moon/
* Free to use under the MIT license.
* https://kingpixil.github.io/license
*/
!function(t,e){"object"==typeof module&&module.exports?module.exports=e():t.Moon=e()}(this,function(){function t(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function e(e){e=e||{};var n=this,s=e.data;this.$el=document.querySelector(e.el),this.$template=e.template||this.$el.innerHTML,this.$hooks=t({created:a,mounted:a,updated:a,destroyed:a},e.hooks),this.$methods=e.methods||{},this.$components=t(e.components||{},i),this.$directives=t(e.directives||{},o),this.$dom={},this.$destroyed=!1,Object.defineProperty(this,"$data",{get:function(){return s},set:function(t){s=t,this.build(this.$el.childNodes,this.$dom.children)},configurable:!0}),o["m-if"]=function(t,e,o){var i=new Function("return "+e);i()?t.textContent=r(o.val,n.$data):t.textContent=""},o["m-show"]=function(t,e,n){var o=new Function("return "+e);o()?t.style.display="block":t.style.display="none"},o["m-on"]=function(t,e,o){var i=e.split(":"),r=i[0],s=i[1];t.addEventListener(r,function(){n.method(s)}),delete o.props["m-on"]},o["m-model"]=function(t,e,o){t.value=n.get(e),t.addEventListener("input",function(){n.set(e,t.value)}),delete o.props["m-model"]},o["m-for"]=function(t,e,o){var i=e.split(" in ");i[0],n.get(i[1])},o["m-once"]=function(t,e,o){o.val=t.textContent;for(var i in o.children)o.children[i].val=r(o.children[i].val,n.$data)},o["m-text"]=function(t,e,n){t.textContent=e},o["m-html"]=function(t,e,n){t.innerHTML=e},o["m-mask"]=function(t,e,n){},this.init()}var n={silent:!1,prefix:"m-"},o={},i={},r=function(t,e){var n=t,o=/{{([A-Za-z0-9_.()\[\]]+)}}/gi;n.replace(o,function(t,e){n=n.replace(t,"` + data[`"+e+"`] + `")});var i=new Function("data","var out = `"+n+"`; return out"),r=i(e);return r},s=function(t){var e={};if(!t.attributes)return e;for(var n=t.attributes,o=0;o<n.length;o++)e[n[o].name]=n[o].value;return e},d=function(t,e,n,o){return{type:t,val:e,props:n,children:o}},c=function(t){for(var e=[],n=0;n<t.childNodes.length;n++)e.push(c(t.childNodes[n]));return d(t.nodeName,t.textContent,s(t),e)},u=function(t,e){t.innerHTML=e},a=function(){},l=void 0!==typeof window.console;return e.prototype.log=function(t){!n.silent&&l&&console.log(t)},e.prototype.error=function(t){l&&console.error("[Moon] ERR: "+t)},e.prototype.set=function(t,e){this.$data[t]=e,this.$destroyed||this.build(this.$el.childNodes,this.$dom.children),this.$hooks.updated()},e.prototype.get=function(t){return this.$data[t]},e.prototype.method=function(t){this.$methods[t]()},e.prototype.destroy=function(){Object.defineProperty(this,"$data",{set:function(t){_data=t}}),this.$destroyed=!0,this.$hooks.destroyed()},e.prototype.build=function(t,e){for(var n=0;n<t.length;n++){var o=e[n],i=t[n];"#text"===i.nodeName&&(i.textContent=r(o.val,this.$data))}},e.prototype.init=function(){this.log("======= Moon ======="),this.$hooks.created(),u(this.$el,this.$template),this.$dom=c(this.$el),this.build(this.$el.childNodes,this.$dom.children),this.$hooks.mounted()},e.config=function(t){t.silent&&(n.silent=t.silent),t.prefix&&(n.prefix=t.prefix)},e.use=function(t){t.init(e)},e.directive=function(t,e){o[n.prefix+t]=e},e.component=function(t,n){function o(){e.call(this,n)}var r=this;o.prototype=Object.create(r.prototype),o.prototype.constructor=o;var s=new o;return i[t]=s,s},e});